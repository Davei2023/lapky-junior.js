import{A as U,i,a as I}from"./assets/vendor-BV-8v0lm.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function $(){document.body.style.overflow="hidden"}function v(){document.body.style.overflow=""}function V(e,t=0){if(!e)return;const n=e.getBoundingClientRect().top+window.scrollY-t;window.scrollTo({top:n,behavior:"smooth"})}const c={burgerBtn:document.querySelector(".header-burger-btn"),modalMenu:document.querySelector(".header-modal-menu"),closeBtn:document.querySelector(".header-close-btn"),modalLinks:document.querySelectorAll(".header-modal-link"),modalBtn:document.querySelector(".header-modal-btn"),header:document.querySelector(".header")};function G(){c.modalMenu.classList.add("is-open"),$()}function f(){c.modalMenu.classList.remove("is-open"),v()}c.burgerBtn.addEventListener("click",G);c.closeBtn.addEventListener("click",f);document.addEventListener("keydown",e=>{e.key==="Escape"&&c.modalMenu.classList.contains("is-open")&&f()});c.modalLinks.forEach(e=>{e.addEventListener("click",f)});c.modalBtn.addEventListener("click",f);const Q=window.matchMedia("(min-width: 1440px)");Q.addEventListener("change",e=>{e.matches&&f()});document.addEventListener("click",e=>{e.target.closest(".icon-header-btn")&&(c.modalMenu?.classList.remove("is-open"),v())});document.addEventListener("click",e=>{const t=e.target.closest('a[href^="#"]');if(!t)return;const n=t.getAttribute("href");if(n==="#")return;const a=document.querySelector(n);if(!a)return;e.preventDefault();const o=c.header?.offsetHeight||0;V(a,o),v()});new U(".faq-list",{duration:300,showMultiple:!1,openOnInit:[]});new Swiper(".about-swiper",{slidesPerView:1,spaceBetween:0,speed:600,navigation:{nextEl:".about-arrow-right",prevEl:".about-arrow-left"},pagination:{el:".swiper-pagination",clickable:!0},grabCursor:!0,allowTouchMove:!0,watchOverflow:!0});const g=document.getElementById("petModalBackdrop"),z=document.getElementById("petModalContainer"),q=document.getElementById("modalCloseBtn"),J=document.querySelectorAll("[data-modal-adopt]"),C=document.getElementById("modalImage"),K=document.getElementById("modalSpecies"),Y=document.getElementById("modalName"),W=document.getElementById("modalAge"),Z=document.getElementById("modalGender"),ee=document.getElementById("modalDescription"),te=document.getElementById("modalHealth"),ne=document.getElementById("modalBehavior");let x=null;function oe(e,t){const n=t.get(e);if(!n){console.error("Animal not found:",e);return}x=e,C.src=n.image,C.alt=n.name,K.textContent=n.species,Y.textContent=n.name,W.textContent=n.age,Z.textContent=n.gender,ee.textContent=n.description||"Інформація відсутня",te.textContent=n.healthStatus||"Інформація про здоров'я відсутня",ne.textContent=n.behavior||"Інформація про поведінку відсутня",g.classList.remove("hidden"),document.body.classList.add("modal-open"),q.focus()}function L(){g.classList.add("hidden"),document.body.classList.remove("modal-open")}q.addEventListener("click",L);g.addEventListener("click",e=>{e.target===g&&L()});z.addEventListener("click",e=>{e.stopPropagation()});document.addEventListener("keydown",e=>{e.key==="Escape"&&!g.classList.contains("hidden")&&L()});J.forEach(e=>{e.addEventListener("click",()=>{L(),console.log("Opening adoption form for animal:",x),openOrderModal()})});const ae="https://paw-hut.b.goit.study";async function O(e,t={}){const n=await fetch(`${ae}${e}`,{headers:{"Content-Type":"application/json"},...t});if(!n.ok){const a=await n.json().catch(()=>({}));throw new Error(a.message||"API error")}return n.json()}function se({page:e=1,limit:t=10}={}){return O(`/api/feedbacks?page=${e}&limit=${t}`)}const re=document.getElementById("stories-list");function ie({rate:e,description:t,author:n}){return`
    <li class="swiper-slide story-card">
      <div class="story-rating" aria-label="Оцінка ${e} з 5">
        ${e}
      </div>
      <p class="story-text">${t}</p>
      <p class="story-author">${n}</p>
    </li>
  `}async function ce(){try{const e=await se({page:1,limit:6}),t=e?.results||e?.feedbacks||e?.data?.results||[];if(!Array.isArray(t)||t.length===0)throw new Error("No feedbacks found");t.forEach(n=>{re.insertAdjacentHTML("beforeend",ie(n))}),de()}catch(e){console.error("Failed to load feedbacks:",e.message)}}function de(){new Swiper(".success-stories-swiper",{slidesPerView:1,spaceBetween:32,speed:500,autoHeight:!0,pagination:{el:".slider-pagination",clickable:!0,bulletClass:"dot",bulletActiveClass:"active"},navigation:{nextEl:".slider-btn--next",prevEl:".slider-btn--prev",disabledClass:"is-disabled"},breakpoints:{768:{slidesPerView:2,spaceBetween:40},1440:{slidesPerView:2,spaceBetween:80}}})}ce();const R="https://paw-hut.b.goit.study/api/",le="categories",me="animals",P=window.matchMedia("(min-width: 1440px)"),ue=document.querySelector(".categories-list"),p=document.querySelector(".animals-list"),T=document.querySelector(".categories-list"),m=document.querySelector(".loadmore-btn"),pe=document.querySelector(".categories-text"),j=document.querySelector("span");function H(){j.classList.remove("hidden")}function w(){j.classList.add("hidden")}function h(){m.classList.remove("hidden")}function S(){m.classList.add("hidden")}S();async function ge(){const{data:e}=await I(`${R}${le}`);return e}ge().then(e=>{ue.insertAdjacentHTML("afterbegin",fe(e))});function fe(e){return e.toSorted((n,a)=>a._id.localeCompare(n._id)).map(({name:n,_id:a})=>`<li class="categories-item"><div class="categories-text" data-id="${a}" >${n}</div></li>`).join("")}let y=1,E=0,k=null;function X(e){return e.matches?E=9:E=8}P.addEventListener("change",X);X(P);async function B(){const{data:e}=await I(`${R}${me}`,{params:{page:y,limit:E,categoryId:k}});return e}B().then(e=>{p.insertAdjacentHTML("beforeend",A(e.animals)),h()}).catch(e=>i.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"}));const _=new Map;function A(e){return e.forEach(t=>{_.set(t._id,t)}),e.map(({_id:t,image:n,name:a,species:o,categories:s,age:d,gender:u,behavior:r})=>`<li class="animals-item"><img class="animals-img" src="${n}" alt="${o}"/><div class="animals-item-container"><p class="animals-subtitle">${o}</p><h2 class="animals-title">${a}</h2><div class="animals-sublist">${s.map(({name:l})=>`<h3 class="animals-categories">${l}</h3>`).join("")}</div><div class="animals-textlist"><p class="animals-subtitle">${d}</p><p class="animals-subtitle">${u}</p></div>
          <p class="animals-text">${r}</p></div>

          <button type= "button" class="animals-btn" data-animal-id="${t}">Дізнатись більше</button></li>`).join("")}p.addEventListener("click",e=>{if(e.target.classList.contains("animals-btn")){const t=e.target.dataset.animalId;t&&oe(t,_)}});m.addEventListener("click",he);async function he(e){y++,S(),H();try{const t=await B(y);if(t&&t.animals.length>0){p.insertAdjacentHTML("beforeend",A(t.animals));const o=document.querySelector(".animals-item").getBoundingClientRect().height;window.scrollBy({left:0,top:o*.6,behavior:"smooth"}),e.target.blur(),w(),h()}p.children.length>=t.totalItems&&(m.disabled=!0,m.classList.add("disabled"),i.info({message:"Всі хвостики вже тут",position:"topRight",color:"green"}))}catch{i.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"})}}T.addEventListener("click",ye);async function ye(e){if(e.preventDefault(),S(),H(),y=1,m.disabled=!1,m.classList.remove("disabled"),e.target!==e.currentTarget){p.innerHTML="",pe.classList.remove("active"),T.querySelectorAll(".active").forEach(n=>{n.classList.remove("active")}),e.target.classList.add("active"),k=e.target.dataset.id;try{const n=await B(k);p.insertAdjacentHTML("beforeend",A(n.animals)),w(),h()}catch{i.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"}),w(),h()}}}function ve(e){return O("/api/orders",{method:"POST",body:JSON.stringify(e)})}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("[data-order-backdrop]"),t=document.querySelector("[data-order-modal]"),n=document.querySelector(".order-modal__close"),a=document.getElementById("orderForm"),o=document.getElementById("pets-list-section");if(!e||!t||!a||!o)return;let s=null;function d(r){s=r,e.classList.add("is-open"),$()}function u(){e.classList.remove("is-open"),v(),a.reset(),s=null}o.addEventListener("click",r=>{const l=r.target.closest("[data-animal-id]");if(!l)return;const M=l.dataset.animalId;d(M)}),n.addEventListener("click",u),e.addEventListener("click",r=>{r.target===e&&u()}),window.addEventListener("keydown",r=>{r.key==="Escape"&&e.classList.contains("is-open")&&u()}),a.addEventListener("submit",async r=>{r.preventDefault();const l=a.name.value.trim(),b=a.phone.value.trim().replace(/\D/g,""),D=a.comment.value.trim();if(!l||!b){i.error({message:"Заповніть обовʼязкові поля",position:"topRight"});return}if(b.length!==12){i.error({message:"Телефон має формат 380XXXXXXXXX",position:"topRight"});return}if(!s){i.error({message:"Не обрано тварину",position:"topRight"});return}const N={name:l,phone:b,comment:D,animalId:s};try{await ve(N),i.success({message:"Заявку надіслано",position:"topRight"}),u()}catch(F){i.error({message:F.message||"Помилка сервера",position:"topRight"})}}),window.openOrderModal=d});
//# sourceMappingURL=index.js.map
