import{A as oe,R as re,S as se,i as c,a as T}from"./assets/vendor-Dmhv6PSn.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();function C(){document.body.style.overflow="hidden"}function I(){document.body.style.overflow=""}function ae(e,n=0){if(!e)return;const t=e.getBoundingClientRect().top+window.scrollY-n;window.scrollTo({top:t,behavior:"smooth"})}const d={burgerBtn:document.querySelector(".header-burger-btn"),modalMenu:document.querySelector(".header-modal-menu"),closeBtn:document.querySelector(".header-close-btn"),modalLinks:document.querySelectorAll(".header-modal-link"),modalBtn:document.querySelector(".header-modal-btn"),header:document.querySelector(".header")};function ie(){d.modalMenu.classList.contains("is-open")||(d.modalMenu.classList.add("is-open"),C(),ce())}function f(){d.modalMenu.classList.contains("is-open")&&(d.modalMenu.classList.remove("is-open"),I(),de())}function ce(){document.addEventListener("keydown",H),document.addEventListener("click",j)}function de(){document.removeEventListener("keydown",H),document.removeEventListener("click",j)}function H(e){e.key==="Escape"&&f()}function j(e){const n=e.target.closest(".header-modal-link"),t=e.target.closest(".header-modal-btn"),r=e.target.closest(".icon-header-btn");(n||t||r)&&f();const o=e.target.closest('a[href^="#"]');if(!o)return;const s=o.getAttribute("href");if(s==="#")return;const a=document.querySelector(s);if(!a)return;e.preventDefault();const u=d.header?.offsetHeight||0;ae(a,u),f()}d.burgerBtn?.addEventListener("click",ie);d.closeBtn?.addEventListener("click",f);const le=window.matchMedia("(min-width: 1440px)");le.addEventListener("change",e=>{e.matches&&f()});new oe(".faq-list",{duration:300,showMultiple:!1,openOnInit:[]});new Swiper(".about-swiper",{slidesPerView:1,spaceBetween:0,speed:600,navigation:{nextEl:".about-arrow-right",prevEl:".about-arrow-left"},pagination:{el:".swiper-pagination",clickable:!0},grabCursor:!0,allowTouchMove:!0,watchOverflow:!0});const m=document.getElementById("petModalBackdrop"),N=document.getElementById("petModalContainer"),b=document.getElementById("modalCloseBtn"),X=document.querySelectorAll("[data-modal-adopt]"),x=document.getElementById("modalImage"),ue=document.getElementById("modalSpecies"),me=document.getElementById("modalName"),pe=document.getElementById("modalAge"),fe=document.getElementById("modalGender"),ge=document.getElementById("modalDescription"),he=document.getElementById("modalHealth"),ve=document.getElementById("modalBehavior");let k=null;function _(e){e.target===m&&g()}function D(e){e.stopPropagation()}function F(e){e.key==="Escape"&&!m.classList.contains("hidden")&&g()}function U(){g(),console.log("Opening adoption form for animal:",k),openOrderModal(k)}function ye(e,n){const t=n.get(e);if(!t){console.error("Animal not found:",e);return}k=e,x.src=t.image,x.alt=t.name,ue.textContent=t.species,me.textContent=t.name,pe.textContent=t.age,fe.textContent=t.gender,ge.textContent=t.description||"Інформація відсутня",he.textContent=t.healthStatus||"Інформація про здоров'я відсутня",ve.textContent=t.behavior||"Інформація про поведінку відсутня",m.classList.remove("hidden"),document.body.classList.add("modal-open"),b.focus(),C(),b.addEventListener("click",g),m.addEventListener("click",_),N.addEventListener("click",D),document.addEventListener("keydown",F),X.forEach(r=>{r.addEventListener("click",U)})}function g(){m.classList.add("hidden"),document.body.classList.remove("modal-open"),b.removeEventListener("click",g),m.removeEventListener("click",_),N.removeEventListener("click",D),document.removeEventListener("keydown",F),X.forEach(e=>{e.removeEventListener("click",U)}),I()}const Le="https://paw-hut.b.goit.study";async function V(e,n={}){const t=await fetch(`${Le}${e}`,{headers:{"Content-Type":"application/json"},...n});if(!t.ok){const r=await t.json().catch(()=>({}));throw new Error(r.message||"API error")}return t.json()}function we({page:e=1,limit:n=10}={}){return V(`/api/feedbacks?page=${e}&limit=${n}`)}const S=document.getElementById("stories-list");S||console.error("Element #stories-list not found");function Ee(){document.querySelectorAll(".rating").forEach(e=>{if(e.dataset.inited)return;const n=Number(e.dataset.rate)||0,t="./";new re(e,{readOnly:!0,score:n,half:!0,starOn:t+"src/img/star-filled.svg",starOff:t+"src/img/star-outline.svg",starHalf:t+"src/img/star-half.svg"}).init(),e.dataset.inited="true"})}function be({rate:e,description:n,author:t}){return`
    <li class="swiper-slide story-card">
      <div class="story-rating rating" data-rate="${e}"  aria-label="Оцінка ${e} з 5"></div>
      <p class="story-text">${n}</p>
      <p class="story-author">${t}</p>
    </li>
  `}let P=null;function ke(){if(P)return;const e=window.Swiper||se;if(!e){console.error("Swiper is not available. Add Swiper via <script> or install via npm.");return}P=new e(".success-stories-swiper",{slidesPerView:1,slidesGroup:2,speed:500,autoHeight:!0,pagination:{el:".slider-pagination",clickable:!0,bulletClass:"dot",bulletActiveClass:"active"},navigation:{nextEl:".slider-btn--next",prevEl:".slider-btn--prev",disabledClass:"is-disabled"},breakpoints:{768:{slidesPerView:2,spaceBetween:32},1440:{slidesPerView:2,spaceBetween:32}}})}async function Se(){try{const e=await we({page:1,limit:10}),n=e?.results||e?.feedbacks||e?.data?.results||[];if(!Array.isArray(n)||n.length===0){console.error("No feedbacks found");return}S.innerHTML="",n.forEach(t=>{S.insertAdjacentHTML("beforeend",be(t))}),Ee(),ke()}catch(e){console.error("Failed to load feedbacks:",e)}}Se();const G="https://paw-hut.b.goit.study/api/",Me="categories",Be="animals",K=window.matchMedia("(min-width: 1440px)"),Ae=document.querySelector(".categories-list"),p=document.querySelector(".animals-list"),Q=document.querySelector(".categories-list"),l=document.querySelector(".loadmore-btn"),Ce=document.querySelector(".categories-text"),z=document.querySelector("span");function J(){z.classList.remove("hidden")}function M(){z.classList.add("hidden")}function v(){l.classList.remove("hidden")}function $(){l.classList.add("hidden")}$();async function Ie(){const{data:e}=await T(`${G}${Me}`);return e}Ie().then(e=>{Ae.insertAdjacentHTML("beforeend",$e(e))});function $e(e){return e.toSorted((t,r)=>t._id.localeCompare(r._id)).map(({name:t,_id:r})=>`<li class="categories-item"><div class="categories-text" data-id="${r}" >${t}</div></li>`).join("")}let y=1,B=0,A=null;function Y(e){return e.matches?B=9:B=8}K.addEventListener("change",Y);Y(K);async function q(){const{data:e}=await T(`${G}${Be}`,{params:{page:y,limit:B,categoryId:A}});return e}q().then(e=>{p.insertAdjacentHTML("beforeend",O(e.animals)),v()}).catch(e=>c.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"}));const W=new Map;function O(e){return e.forEach(n=>{W.set(n._id,n)}),e.map(({_id:n,image:t,name:r,species:o,categories:s,age:a,gender:u,behavior:L})=>`<li class="animals-item"><img class="animals-img" src="${t}" alt="${o}"/><div class="animals-item-container"><p class="animals-subtitle">${o}</p><h2 class="animals-title">${r}</h2><div class="animals-sublist">${s.map(({name:w})=>`<h3 class="animals-categories">${w}</h3>`).join("")}</div><div class="animals-textlist"><p class="animals-subtitle">${a}</p><p class="animals-subtitle">${u}</p></div>
          <p class="animals-text">${L}</p></div>

          <button type= "button" class="animals-btn" data-animal-id="${n}">Дізнатись більше</button></li>`).join("")}p.addEventListener("click",e=>{if(e.target.classList.contains("animals-btn")){const n=e.target.dataset.animalId;n&&ye(n,W)}});l.addEventListener("click",qe);async function qe(e){y++,$(),J();try{const n=await q(y);if(n&&n.animals.length>0){p.insertAdjacentHTML("beforeend",O(n.animals));const o=document.querySelector(".animals-item").getBoundingClientRect().height;window.scrollBy({left:0,top:o*.6,behavior:"smooth"}),e.target.blur(),M(),v()}p.children.length>=n.totalItems&&(l.disabled=!0,l.classList.add("disabled"),c.info({message:"Всі хвостики вже тут",position:"topRight",color:"green"}))}catch{c.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"})}}Q.addEventListener("click",Oe);async function Oe(e){if(e.preventDefault(),$(),J(),y=1,l.disabled=!1,l.classList.remove("disabled"),e.target!==e.currentTarget){p.innerHTML="",Ce.classList.remove("active"),Q.querySelectorAll(".active").forEach(t=>{t.classList.remove("active")}),e.target.classList.add("active"),A=e.target.dataset.id;try{const t=await q(A);p.insertAdjacentHTML("beforeend",O(t.animals)),M(),v()}catch{c.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"}),M(),v()}}}function Re(e){return V("/api/orders",{method:"POST",body:JSON.stringify(e)})}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("[data-order-backdrop]"),n=document.querySelector("[data-order-modal]"),t=document.querySelector(".order-modal__close"),r=document.getElementById("orderForm"),o=document.getElementById("pets-list-section");if(!e||!n||!r||!o)return;let s=null;function a(i){i.key==="Escape"&&closeOrderModal()}function u(i){i.target===e&&closeOrderModal()}function L(){window.addEventListener("keydown",a),e.addEventListener("click",u)}function w(){window.removeEventListener("keydown",a),e.removeEventListener("click",u)}function Z(i){s=i,e.classList.add("is-open"),C(),L()}function h(){e.classList.remove("is-open"),I(),r.reset(),s=null,w()}t.addEventListener("click",h),e.addEventListener("click",i=>{i.target===e&&h()}),window.addEventListener("keydown",i=>{i.key==="Escape"&&e.classList.contains("is-open")&&h()}),r.addEventListener("submit",async i=>{i.preventDefault();const R=r.name.value.trim(),E=r.phone.value.trim().replace(/\D/g,""),ee=r.comment.value.trim();if(!R||!E){c.error({message:"Заповніть обовʼязкові поля",position:"topRight"});return}if(E.length!==12){c.error({message:"Телефон має формат 380XXXXXXXXX",position:"topRight"});return}if(!s){c.error({message:"Не обрано тварину",position:"topRight"});return}const te={name:R,phone:E,comment:ee,animalId:s};try{await Re(te),c.success({message:"Заявку надіслано",position:"topRight"}),h()}catch(ne){c.error({message:ne.message||"Помилка сервера",position:"topRight"})}}),window.openOrderModal=Z});
//# sourceMappingURL=index.js.map
