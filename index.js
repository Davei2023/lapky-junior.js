import{A as U,i,a as I}from"./assets/vendor-BV-8v0lm.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();function q(){document.body.style.overflow="hidden"}function L(){document.body.style.overflow=""}function F(e,o=0){if(!e)return;const t=e.getBoundingClientRect().top+window.scrollY-o;window.scrollTo({top:t,behavior:"smooth"})}const c={burgerBtn:document.querySelector(".header-burger-btn"),modalMenu:document.querySelector(".header-modal-menu"),closeBtn:document.querySelector(".header-close-btn"),modalLinks:document.querySelectorAll(".header-modal-link"),modalBtn:document.querySelector(".header-modal-btn"),header:document.querySelector(".header")};function G(){c.modalMenu.classList.add("is-open"),q()}function f(){c.modalMenu.classList.remove("is-open"),L()}c.burgerBtn.addEventListener("click",G);c.closeBtn.addEventListener("click",f);document.addEventListener("keydown",e=>{e.key==="Escape"&&c.modalMenu.classList.contains("is-open")&&f()});c.modalLinks.forEach(e=>{e.addEventListener("click",f)});c.modalBtn.addEventListener("click",f);const Q=window.matchMedia("(min-width: 1440px)");Q.addEventListener("change",e=>{e.matches&&f()});document.addEventListener("click",e=>{e.target.closest(".icon-header-btn")&&(c.modalMenu?.classList.remove("is-open"),L())});document.addEventListener("click",e=>{const o=e.target.closest('a[href^="#"]');if(!o)return;const t=o.getAttribute("href");if(t==="#")return;const a=document.querySelector(t);if(!a)return;e.preventDefault();const n=c.header?.offsetHeight||0;F(a,n),L()});new U(".faq-list",{duration:300,showMultiple:!1,openOnInit:[]});new Swiper(".about-swiper",{slidesPerView:1,spaceBetween:0,speed:600,navigation:{nextEl:".about-arrow-right",prevEl:".about-arrow-left"},pagination:{el:".swiper-pagination",clickable:!0},grabCursor:!0,allowTouchMove:!0,watchOverflow:!0});const g=document.getElementById("petModalBackdrop"),z=document.getElementById("petModalContainer"),$=document.getElementById("modalCloseBtn"),J=document.querySelectorAll("[data-modal-adopt]"),C=document.getElementById("modalImage"),K=document.getElementById("modalSpecies"),V=document.getElementById("modalName"),Y=document.getElementById("modalAge"),W=document.getElementById("modalGender"),Z=document.getElementById("modalDescription"),ee=document.getElementById("modalHealth"),te=document.getElementById("modalBehavior");let O=null;function oe(e,o){const t=o.get(e);if(!t){console.error("Animal not found:",e);return}O=e,C.src=t.image,C.alt=t.name,K.textContent=t.species,V.textContent=t.name,Y.textContent=t.age,W.textContent=t.gender,Z.textContent=t.description||"Інформація відсутня",ee.textContent=t.healthStatus||"Інформація про здоров'я відсутня",te.textContent=t.behavior||"Інформація про поведінку відсутня",g.classList.remove("hidden"),document.body.classList.add("modal-open"),$.focus()}function v(){g.classList.add("hidden"),document.body.classList.remove("modal-open")}$.addEventListener("click",v);g.addEventListener("click",e=>{e.target===g&&v()});z.addEventListener("click",e=>{e.stopPropagation()});document.addEventListener("keydown",e=>{e.key==="Escape"&&!g.classList.contains("hidden")&&v()});J.forEach(e=>{e.addEventListener("click",()=>{v(),console.log("Opening adoption form for animal:",O),openOrderModal()})});const R="https://paw-hut.b.goit.study/api/",ne="categories",ae="animals",x=window.matchMedia("(min-width: 1440px)"),se=document.querySelector(".categories-list"),p=document.querySelector(".animals-list"),T=document.querySelector(".categories-list"),m=document.querySelector(".loadmore-btn"),re=document.querySelector(".categories-text"),P=document.querySelector("span");function j(){P.classList.remove("hidden")}function E(){P.classList.add("hidden")}function h(){m.classList.remove("hidden")}function B(){m.classList.add("hidden")}B();async function ie(){const{data:e}=await I(`${R}${ne}`);return e}ie().then(e=>{se.insertAdjacentHTML("afterbegin",ce(e))});function ce(e){return e.toSorted((t,a)=>a._id.localeCompare(t._id)).map(({name:t,_id:a})=>`<li class="categories-item"><div class="categories-text" data-id="${a}" >${t}</div></li>`).join("")}let y=1,b=0,k=null;function H(e){return e.matches?b=9:b=8}x.addEventListener("change",H);H(x);async function S(){const{data:e}=await I(`${R}${ae}`,{params:{page:y,limit:b,categoryId:k}});return e}S().then(e=>{p.insertAdjacentHTML("beforeend",M(e.animals)),h()}).catch(e=>i.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"}));const X=new Map;function M(e){return e.forEach(o=>{X.set(o._id,o)}),e.map(({_id:o,image:t,name:a,species:n,categories:s,age:d,gender:u,behavior:r})=>`<li class="animals-item"><img class="animals-img" src="${t}" alt="${n}"/><div class="animals-item-container"><p class="animals-subtitle">${n}</p><h2 class="animals-title">${a}</h2><div class="animals-sublist">${s.map(({name:l})=>`<h3 class="animals-categories">${l}</h3>`).join("")}</div><div class="animals-textlist"><p class="animals-subtitle">${d}</p><p class="animals-subtitle">${u}</p></div>
          <p class="animals-text">${r}</p></div>

          <button type= "button" class="animals-btn" data-animal-id="${o}">Дізнатись більше</button></li>`).join("")}p.addEventListener("click",e=>{if(e.target.classList.contains("animals-btn")){const o=e.target.dataset.animalId;o&&oe(o,X)}});m.addEventListener("click",de);async function de(e){y++,B(),j();try{const o=await S(y);if(o&&o.animals.length>0){p.insertAdjacentHTML("beforeend",M(o.animals));const n=document.querySelector(".animals-item").getBoundingClientRect().height;window.scrollBy({left:0,top:n*.6,behavior:"smooth"}),e.target.blur(),E(),h()}p.children.length>=o.totalItems&&(m.disabled=!0,m.classList.add("disabled"),i.info({message:"Всі хвостики вже тут",position:"topRight",color:"green"}))}catch{i.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"})}}T.addEventListener("click",le);async function le(e){if(e.preventDefault(),B(),j(),y=1,m.disabled=!1,m.classList.remove("disabled"),e.target!==e.currentTarget){p.innerHTML="",re.classList.remove("active"),T.querySelectorAll(".active").forEach(t=>{t.classList.remove("active")}),e.target.classList.add("active"),k=e.target.dataset.id;try{const t=await S(k);p.insertAdjacentHTML("beforeend",M(t.animals)),E(),h()}catch{i.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"}),E(),h()}}}const me="https://paw-hut.b.goit.study";async function ue(e,o={}){const t=await fetch(`${me}${e}`,{headers:{"Content-Type":"application/json"},...o});if(!t.ok){const a=await t.json().catch(()=>({}));throw new Error(a.message||"API error")}return t.json()}function pe(e){return ue("/api/orders",{method:"POST",body:JSON.stringify(e)})}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("[data-order-backdrop]"),o=document.querySelector("[data-order-modal]"),t=document.querySelector(".order-modal__close"),a=document.getElementById("orderForm"),n=document.getElementById("pets-list-section");if(!e||!o||!a||!n)return;let s=null;function d(r){s=r,e.classList.add("is-open"),q()}function u(){e.classList.remove("is-open"),L(),a.reset(),s=null}n.addEventListener("click",r=>{const l=r.target.closest("[data-animal-id]");if(!l)return;const A=l.dataset.animalId;d(A)}),t.addEventListener("click",u),e.addEventListener("click",r=>{r.target===e&&u()}),window.addEventListener("keydown",r=>{r.key==="Escape"&&e.classList.contains("is-open")&&u()}),a.addEventListener("submit",async r=>{r.preventDefault();const l=a.name.value.trim(),w=a.phone.value.trim().replace(/\D/g,""),_=a.comment.value.trim();if(!l||!w){i.error({message:"Заповніть обовʼязкові поля",position:"topRight"});return}if(w.length!==12){i.error({message:"Телефон має формат 380XXXXXXXXX",position:"topRight"});return}if(!s){i.error({message:"Не обрано тварину",position:"topRight"});return}const D={name:l,phone:w,comment:_,animalId:s};try{await pe(D),i.success({message:"Заявку надіслано",position:"topRight"}),u()}catch(N){i.error({message:N.message||"Помилка сервера",position:"topRight"})}}),window.openOrderModal=d});
//# sourceMappingURL=index.js.map
