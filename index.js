import{A as ne,R as oe,S as ae,i,a as H}from"./assets/vendor-Dmhv6PSn.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function I(){document.body.style.overflow="hidden"}function p(){document.body.style.overflow=""}function re(e,t=0){if(!e)return;const n=e.getBoundingClientRect().top+window.scrollY-t;window.scrollTo({top:n,behavior:"smooth"})}const c={burgerBtn:document.querySelector(".header-burger-btn"),modalMenu:document.querySelector(".header-modal-menu"),closeBtn:document.querySelector(".header-close-btn"),modalLinks:document.querySelectorAll(".header-modal-link"),modalBtn:document.querySelector(".header-modal-btn"),header:document.querySelector(".header")};function se(){c.modalMenu.classList.add("is-open"),I()}function f(){c.modalMenu.classList.remove("is-open"),p()}c.burgerBtn.addEventListener("click",se);c.closeBtn.addEventListener("click",f);document.addEventListener("keydown",e=>{e.key==="Escape"&&c.modalMenu.classList.contains("is-open")&&f()});c.modalLinks.forEach(e=>{e.addEventListener("click",f)});c.modalBtn.addEventListener("click",f);const ie=window.matchMedia("(min-width: 1440px)");ie.addEventListener("change",e=>{e.matches&&f()});document.addEventListener("click",e=>{e.target.closest(".icon-header-btn")&&(c.modalMenu?.classList.remove("is-open"),p())});document.addEventListener("click",e=>{const t=e.target.closest('a[href^="#"]');if(!t)return;const n=t.getAttribute("href");if(n==="#")return;const a=document.querySelector(n);if(!a)return;e.preventDefault();const o=c.header?.offsetHeight||0;re(a,o),p()});new ne(".faq-list",{duration:300,showMultiple:!1,openOnInit:[]});new Swiper(".about-swiper",{slidesPerView:1,spaceBetween:0,speed:600,navigation:{nextEl:".about-arrow-right",prevEl:".about-arrow-left"},pagination:{el:".swiper-pagination",clickable:!0},grabCursor:!0,allowTouchMove:!0,watchOverflow:!0});const u=document.getElementById("petModalBackdrop"),j=document.getElementById("petModalContainer"),k=document.getElementById("modalCloseBtn"),N=document.querySelectorAll("[data-modal-adopt]"),R=document.getElementById("modalImage"),ce=document.getElementById("modalSpecies"),le=document.getElementById("modalName"),de=document.getElementById("modalAge"),ue=document.getElementById("modalGender"),me=document.getElementById("modalDescription"),pe=document.getElementById("modalHealth"),fe=document.getElementById("modalBehavior");let S=null;function X(e){e.target===u&&g()}function _(e){e.stopPropagation()}function D(e){e.key==="Escape"&&!u.classList.contains("hidden")&&g()}function F(){g(),console.log("Opening adoption form for animal:",S),openOrderModal(S)}function ge(e,t){const n=t.get(e);if(!n){console.error("Animal not found:",e);return}S=e,R.src=n.image,R.alt=n.name,ce.textContent=n.species,le.textContent=n.name,de.textContent=n.age,ue.textContent=n.gender,me.textContent=n.description||"Інформація відсутня",pe.textContent=n.healthStatus||"Інформація про здоров'я відсутня",fe.textContent=n.behavior||"Інформація про поведінку відсутня",u.classList.remove("hidden"),document.body.classList.add("modal-open"),k.focus(),I(),k.addEventListener("click",g),u.addEventListener("click",X),j.addEventListener("click",_),document.addEventListener("keydown",D),N.forEach(a=>{a.addEventListener("click",F)})}function g(){u.classList.add("hidden"),document.body.classList.remove("modal-open"),k.removeEventListener("click",g),u.removeEventListener("click",X),j.removeEventListener("click",_),document.removeEventListener("keydown",D),N.forEach(e=>{e.removeEventListener("click",F)}),p()}const he="https://paw-hut.b.goit.study";async function U(e,t={}){const n=await fetch(`${he}${e}`,{headers:{"Content-Type":"application/json"},...t});if(!n.ok){const a=await n.json().catch(()=>({}));throw new Error(a.message||"API error")}return n.json()}function ve({page:e=1,limit:t=10}={}){return U(`/api/feedbacks?page=${e}&limit=${t}`)}const A=document.getElementById("stories-list");A||console.error("Element #stories-list not found");function ye(){document.querySelectorAll(".rating").forEach(e=>{if(e.dataset.inited)return;const t=Number(e.dataset.rate)||0;new oe(e,{readOnly:!0,score:t,half:!0,starOn:"/img/star-filled.svg",starOff:"/img/star-outline.svg",starHalf:"/img/star-half.svg"}).init(),e.dataset.inited="true"})}function T(e=""){return String(e).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function Le({rate:e=0,description:t="",author:n=""}){const a=T(t),o=T(n);return`
    <li class="swiper-slide story-card">
      <div class="story-rating rating" data-rate="${e}" aria-label="Оцінка ${e} з 5"></div>
      <p class="story-text">${a}</p>
      <p class="story-author">${o}</p>
    </li>
  `}let P=null;function we(){if(P)return;const e=window.Swiper||ae;if(!e){console.error("Swiper is not available. Add Swiper via <script> or install via npm.");return}P=new e(".success-stories-swiper",{slidesPerView:1,spaceBetween:32,speed:500,autoHeight:!0,pagination:{el:".slider-pagination",clickable:!0,bulletClass:"dot",bulletActiveClass:"active"},navigation:{nextEl:".slider-btn--next",prevEl:".slider-btn--prev",disabledClass:"is-disabled"},breakpoints:{768:{slidesPerView:2,spaceBetween:40},1440:{slidesPerView:2,spaceBetween:80}}})}async function Ee(){try{const e=await ve({page:1,limit:6}),t=e?.results||e?.feedbacks||e?.data?.results||[];if(!Array.isArray(t)||t.length===0){console.error("No feedbacks found");return}A.innerHTML="",t.forEach(n=>{A.insertAdjacentHTML("beforeend",Le(n))}),ye(),we()}catch(e){console.error("Failed to load feedbacks:",e)}}Ee();const V="https://paw-hut.b.goit.study/api/",be="categories",ke="animals",K=window.matchMedia("(min-width: 1440px)"),Se=document.querySelector(".categories-list"),m=document.querySelector(".animals-list"),G=document.querySelector(".categories-list"),d=document.querySelector(".loadmore-btn"),Ae=document.querySelector(".categories-text"),Q=document.querySelector("span");function z(){Q.classList.remove("hidden")}function B(){Q.classList.add("hidden")}function y(){d.classList.remove("hidden")}function $(){d.classList.add("hidden")}$();async function Be(){const{data:e}=await H(`${V}${be}`);return e}Be().then(e=>{Se.insertAdjacentHTML("beforeend",Me(e))});function Me(e){return e.toSorted((n,a)=>n._id.localeCompare(a._id)).map(({name:n,_id:a})=>`<li class="categories-item"><div class="categories-text" data-id="${a}" >${n}</div></li>`).join("")}let L=1,M=0,C=null;function J(e){return e.matches?M=9:M=8}K.addEventListener("change",J);J(K);async function q(){const{data:e}=await H(`${V}${ke}`,{params:{page:L,limit:M,categoryId:C}});return e}q().then(e=>{m.insertAdjacentHTML("beforeend",O(e.animals)),y()}).catch(e=>i.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"}));const Y=new Map;function O(e){return e.forEach(t=>{Y.set(t._id,t)}),e.map(({_id:t,image:n,name:a,species:o,categories:r,age:l,gender:h,behavior:w})=>`<li class="animals-item"><img class="animals-img" src="${n}" alt="${o}"/><div class="animals-item-container"><p class="animals-subtitle">${o}</p><h2 class="animals-title">${a}</h2><div class="animals-sublist">${r.map(({name:E})=>`<h3 class="animals-categories">${E}</h3>`).join("")}</div><div class="animals-textlist"><p class="animals-subtitle">${l}</p><p class="animals-subtitle">${h}</p></div>
          <p class="animals-text">${w}</p></div>

          <button type= "button" class="animals-btn" data-animal-id="${t}">Дізнатись більше</button></li>`).join("")}m.addEventListener("click",e=>{if(e.target.classList.contains("animals-btn")){const t=e.target.dataset.animalId;t&&ge(t,Y)}});d.addEventListener("click",Ce);async function Ce(e){L++,$(),z();try{const t=await q(L);if(t&&t.animals.length>0){m.insertAdjacentHTML("beforeend",O(t.animals));const o=document.querySelector(".animals-item").getBoundingClientRect().height;window.scrollBy({left:0,top:o*.6,behavior:"smooth"}),e.target.blur(),B(),y()}m.children.length>=t.totalItems&&(d.disabled=!0,d.classList.add("disabled"),i.info({message:"Всі хвостики вже тут",position:"topRight",color:"green"}))}catch{i.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"})}}G.addEventListener("click",Ie);async function Ie(e){if(e.preventDefault(),$(),z(),L=1,d.disabled=!1,d.classList.remove("disabled"),e.target!==e.currentTarget){m.innerHTML="",Ae.classList.remove("active"),G.querySelectorAll(".active").forEach(n=>{n.classList.remove("active")}),e.target.classList.add("active"),C=e.target.dataset.id;try{const n=await q(C);m.insertAdjacentHTML("beforeend",O(n.animals)),B(),y()}catch{i.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"}),B(),y()}}}function $e(e){return U("/api/orders",{method:"POST",body:JSON.stringify(e)})}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("[data-order-backdrop]"),t=document.querySelector("[data-order-modal]"),n=document.querySelector(".order-modal__close"),a=document.getElementById("orderForm"),o=document.getElementById("pets-list-section");if(!e||!t||!a||!o)return;let r=null;function l(s){s.key==="Escape"&&closeOrderModal()}function h(s){s.target===e&&closeOrderModal()}function w(){window.addEventListener("keydown",l),e.addEventListener("click",h)}function E(){window.removeEventListener("keydown",l),e.removeEventListener("click",h)}function W(s){r=s,e.classList.add("is-open"),I(),w()}function v(){e.classList.remove("is-open"),p(),a.reset(),r=null,E()}n.addEventListener("click",v),e.addEventListener("click",s=>{s.target===e&&v()}),window.addEventListener("keydown",s=>{s.key==="Escape"&&e.classList.contains("is-open")&&v()}),a.addEventListener("submit",async s=>{s.preventDefault();const x=a.name.value.trim(),b=a.phone.value.trim().replace(/\D/g,""),Z=a.comment.value.trim();if(!x||!b){i.error({message:"Заповніть обовʼязкові поля",position:"topRight"});return}if(b.length!==12){i.error({message:"Телефон має формат 380XXXXXXXXX",position:"topRight"});return}if(!r){i.error({message:"Не обрано тварину",position:"topRight"});return}const ee={name:x,phone:b,comment:Z,animalId:r};try{await $e(ee),i.success({message:"Заявку надіслано",position:"topRight"}),v()}catch(te){i.error({message:te.message||"Помилка сервера",position:"topRight"})}}),window.openOrderModal=W});
//# sourceMappingURL=index.js.map
