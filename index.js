import{A as se,S as T,N as _,P as j,R as ce,i as c,a as U}from"./assets/vendor-BXrzaaQv.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function A(){document.body.style.overflow="hidden"}function x(){document.body.style.overflow=""}function le(e,t=0){if(!e)return;const n=e.getBoundingClientRect().top+window.scrollY-t;window.scrollTo({top:n,behavior:"smooth"})}const l={burgerBtn:document.querySelector(".header-burger-btn"),modalMenu:document.querySelector(".header-modal-menu"),closeBtn:document.querySelector(".header-close-btn"),modalLinks:document.querySelectorAll(".header-modal-link"),modalBtn:document.querySelector(".header-modal-btn"),header:document.querySelector(".header")};function de(){l.modalMenu.classList.contains("is-open")||(l.modalMenu.classList.add("is-open"),A(),me())}function g(){l.modalMenu.classList.contains("is-open")&&(l.modalMenu.classList.remove("is-open"),x(),ue())}function me(){document.addEventListener("keydown",N),document.addEventListener("click",X)}function ue(){document.removeEventListener("keydown",N),document.removeEventListener("click",X)}function N(e){e.key==="Escape"&&g()}function X(e){const t=e.target.closest(".header-modal-link"),n=e.target.closest(".header-modal-btn"),a=e.target.closest(".icon-header-btn");(t||n||a)&&g();const o=e.target.closest('a[href^="#"]');if(!o)return;const i=o.getAttribute("href");if(i==="#")return;const r=document.querySelector(i);if(!r)return;e.preventDefault();const m=l.header?.offsetHeight||0;le(r,m),g()}l.burgerBtn?.addEventListener("click",de);l.closeBtn?.addEventListener("click",g);const pe=window.matchMedia("(min-width: 1440px)");pe.addEventListener("change",e=>{e.matches&&g()});new se(".faq-list",{duration:300,showMultiple:!1,openOnInit:[]});function R(e){const t=window.matchMedia("(max-width: 767.98px)").matches,n=t?".about-mob-next":".about-desk-next",a=t?".about-mob-prev":".about-desk-prev",o=t?".about-mob-pagination":".about-desk-pagination";e.params.navigation?.nextEl===n&&e.params.navigation?.prevEl===a&&e.params.pagination?.el===o||(e.params.navigation=e.params.navigation||{},e.params.navigation.nextEl=n,e.params.navigation.prevEl=a,e.navigation.destroy(),document.querySelector(n)&&document.querySelector(a)&&(e.navigation.init(),e.navigation.update()),e.params.pagination=e.params.pagination||{},e.params.pagination.el=o,e.pagination.destroy(),document.querySelector(o)&&(e.pagination.init(),e.pagination.render(),e.pagination.update()))}new T(".about-swiper",{modules:[_,j],slidesPerView:1,spaceBetween:0,speed:600,navigation:{nextEl:".about-mob-next",prevEl:".about-mob-prev"},pagination:{el:".about-mob-pagination",clickable:!0},grabCursor:!0,allowTouchMove:!0,watchOverflow:!0,breakpoints:{768:{},1440:{}},on:{init(e){R(e)},breakpoint(e){R(e)}}});const u=document.getElementById("petModalBackdrop"),D=document.getElementById("petModalContainer"),k=document.getElementById("modalCloseBtn"),G=document.querySelectorAll("[data-modal-adopt]"),P=document.getElementById("modalImageWrapper");document.getElementById("modalImage");const ge=document.getElementById("modalSpecies"),fe=document.getElementById("modalName"),he=document.getElementById("modalAge"),ve=document.getElementById("modalGender"),Le=document.getElementById("modalDescription"),ye=document.getElementById("modalHealth"),be=document.getElementById("modalBehavior");let C=null;function F(e){e.target===u&&f()}function V(e){e.stopPropagation()}function K(e){e.key==="Escape"&&!u.classList.contains("hidden")&&f()}function Z(){f(),console.log("Opening adoption form for animal:",C),openOrderModal(C)}function we(e,t){const n=t.get(e);if(!n){console.error("Animal not found:",e);return}C=e,P.replaceChildren();const a=[n].map(({image:o,name:i})=>`
        <img
          class="modal-image"
          src="${o}"
          alt="${i}"
          loading="lazy"
        />
      `).join("");P.insertAdjacentHTML("afterbegin",a),ge.textContent=n.species,fe.textContent=n.name,he.textContent=n.age,ve.textContent=n.gender,Le.textContent=n.description||"Інформація відсутня",ye.textContent=n.healthStatus||"Інформація про здоров'я відсутня",be.textContent=n.behavior||"Інформація про поведінку відсутня",u.classList.remove("hidden"),document.body.classList.add("modal-open"),k.focus(),A(),k.addEventListener("click",f),u.addEventListener("click",F),D.addEventListener("click",V),document.addEventListener("keydown",K),G.forEach(o=>{o.addEventListener("click",Z)})}function f(){u.classList.add("hidden"),document.body.classList.remove("modal-open"),k.removeEventListener("click",f),u.removeEventListener("click",F),D.removeEventListener("click",V),document.removeEventListener("keydown",K),G.forEach(e=>{e.removeEventListener("click",Z)}),x()}const Ee="https://paw-hut.b.goit.study";async function z(e,t={}){const n=await fetch(`${Ee}${e}`,{headers:{"Content-Type":"application/json"},...t});if(!n.ok){const a=await n.json().catch(()=>({}));throw new Error(a.message||"API error")}return n.json()}function ke({page:e=1,limit:t=10}={}){return z(`/api/feedbacks?page=${e}&limit=${t}`)}const v=document.getElementById("stories-list");v||console.error("Element #stories-list not found");const Ce=new URL("data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.0709%203.61234C11.4146%202.79588%2012.5854%202.79589%2012.9291%203.61235L14.9579%208.43123C15.1029%208.77543%2015.4306%209.01061%2015.8067%209.0404L21.0727%209.45748C21.9649%209.52814%2022.3267%2010.6281%2021.6469%2011.2034L17.6348%2014.5987C17.3482%2014.8412%2017.223%2015.2218%2017.3106%2015.5843L18.5363%2020.661C18.744%2021.5211%2017.7969%2022.201%2017.033%2021.7401L12.5245%2019.0196C12.2025%2018.8252%2011.7975%2018.8252%2011.4755%2019.0196L6.96699%2021.7401C6.20311%2022.201%205.25596%2021.5211%205.46363%2020.661L6.68942%2015.5843C6.77698%2015.2218%206.65182%2014.8412%206.36526%2014.5987L2.35306%2011.2034C1.67328%2010.6281%202.03507%209.52814%202.92729%209.45748L8.19336%209.0404C8.5695%209.01061%208.89716%208.77543%209.04207%208.43123L11.0709%203.61234Z'%20fill='%2302060A'/%3e%3c/svg%3e",import.meta.url).href,Me=new URL("data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12.0078%204.00098L14.0361%208.81934C14.328%209.51225%2014.9837%209.97813%2015.7275%2010.0371L20.9854%2010.4531L16.9893%2013.835H16.9883C16.4157%2014.3197%2016.1618%2015.086%2016.3389%2015.8193L17.5615%2020.8848C17.5599%2020.8857%2017.5589%2020.8872%2017.5576%2020.8877C17.5559%2020.8869%2017.5532%2020.8858%2017.5498%2020.8838L13.041%2018.1631C12.4014%2017.7772%2011.5986%2017.7772%2010.959%2018.1631L6.4502%2020.8838C6.44677%2020.8858%206.4441%2020.8869%206.44238%2020.8877C6.44085%2020.8871%206.43936%2020.8859%206.4375%2020.8848L7.66113%2015.8193C7.8271%2015.1321%207.61431%2014.416%207.11523%2013.9297L7.01172%2013.835L3.01367%2010.4531L8.27246%2010.0371C9.01627%209.97814%209.67205%209.51246%209.96387%208.81934L11.9912%204.00098C11.9936%204.00054%2011.9966%204%2012%204C12.003%204%2012.0056%204.00062%2012.0078%204.00098Z'%20stroke='%2302060A'%20stroke-width='2'/%3e%3c/svg%3e",import.meta.url).href,Se=new URL("data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.5312%203.80664C11.7032%203.39816%2012.2968%203.39816%2012.4688%203.80664L14.4971%208.625C14.7155%209.14358%2015.2076%209.49471%2015.7676%209.53906L21.0332%209.95605C21.4909%209.99232%2021.6545%2010.5412%2021.3242%2010.8213L17.3115%2014.2168C16.8819%2014.5804%2016.6919%2015.1542%2016.8242%2015.7021L18.0508%2020.7783C18.1502%2021.1902%2017.6892%2021.5518%2017.291%2021.3115H17.29L12.7832%2018.5918C12.3023%2018.3016%2011.6977%2018.3016%2011.2168%2018.5918L6.70898%2021.3115C6.31078%2021.5518%205.84983%2021.1902%205.94922%2020.7783L7.17578%2015.7021C7.30809%2015.1543%207.11814%2014.5805%206.68848%2014.2168L2.67578%2010.8213C2.34544%2010.5412%202.5091%209.99231%202.9668%209.95605L8.23242%209.53906C8.79243%209.49471%209.28456%209.14369%209.50293%208.625L11.5312%203.80664Z'%20fill='url(%23paint0_linear_8242_16266)'%20stroke='%2302060A'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_8242_16266'%20x1='2'%20y1='12.3716'%20x2='22'%20y2='12.3716'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0.5'%20stop-color='%2302060A'/%3e%3cstop%20offset='0.5'%20stop-color='%2302060A'%20stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",import.meta.url).href;function Be(){document.querySelectorAll(".story-rating").forEach(e=>{if(e.dataset.inited)return;const t=Number(e.dataset.rate)||0;new ce(e,{readOnly:!0,score:t,half:!0,starOn:Ce,starOff:Me,starHalf:Se}).init(),e.dataset.inited="true"})}function Ae({rate:e,description:t,author:n}){return`
    <div class="swiper-slide story-card">
      <div class="story-rating rating" data-rate="${e}" aria-label="Оцінка ${e} з 5"></div>
      <p class="story-text">${t}</p>
      <p class="story-author">${n}</p>
    </div>
  `}let H=null;function xe(){H||(H=new T(".success-stories-swiper",{modules:[_,j],slidesPerView:1,slidesGroup:2,speed:500,autoHeight:!0,pagination:{el:".slider-pagination",clickable:!0,bulletClass:"dot",bulletActiveClass:"active"},navigation:{nextEl:".slider-btn--next",prevEl:".slider-btn--prev",disabledClass:"is-disabled"},breakpoints:{768:{slidesPerView:2,spaceBetween:32},1440:{slidesPerView:2,spaceBetween:32}}}))}async function Ie(){try{const e=await ke({page:1,limit:5}),t=e?.results||e?.feedbacks||e?.data?.results||[];if(!Array.isArray(t)||t.length===0){console.error("No feedbacks found");return}if(!v)return;v.innerHTML="",t.forEach(n=>{v.insertAdjacentHTML("beforeend",Ae(n))}),Be(),xe()}catch(e){console.error("Failed to load feedbacks:",e)}}Ie();const Q="https://paw-hut.b.goit.study/api/",$e="categories",qe="animals",W=window.matchMedia("(min-width: 1440px)"),Oe=document.querySelector(".categories-list"),p=document.querySelector(".animals-list"),J=document.querySelector(".categories-list"),d=document.querySelector(".loadmore-btn"),Re=document.querySelector(".categories-text"),Y=document.querySelector("span");function ee(){Y.classList.remove("hidden")}function M(){Y.classList.add("hidden")}function L(){d.classList.remove("hidden")}function I(){d.classList.add("hidden")}I();async function Pe(){const{data:e}=await U(`${Q}${$e}`);return e}Pe().then(e=>{Oe.insertAdjacentHTML("beforeend",He(e))});function He(e){return e.toSorted((n,a)=>n._id.localeCompare(a._id)).map(({name:n,_id:a})=>`<li class="categories-item"><div class="categories-text" data-id="${a}" >${n}</div></li>`).join("")}let y=1,S=0,B=null;function te(e){return e.matches?S=9:S=8}W.addEventListener("change",te);te(W);async function $(){const{data:e}=await U(`${Q}${qe}`,{params:{page:y,limit:S,categoryId:B}});return e}$().then(e=>{p.insertAdjacentHTML("beforeend",q(e.animals)),L()}).catch(e=>c.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"}));const ne=new Map;function q(e){return e.forEach(t=>{ne.set(t._id,t)}),e.map(({_id:t,image:n,name:a,species:o,categories:i,age:r,gender:m,behavior:b})=>`<li class="animals-item"><img class="animals-img" src="${n}" alt="${o}"/><div class="animals-item-container"><p class="animals-subtitle">${o}</p><h2 class="animals-title">${a}</h2><div class="animals-sublist">${i.map(({name:w})=>`<h3 class="animals-categories">${w}</h3>`).join("")}</div><div class="animals-textlist"><p class="animals-subtitle">${r}</p><p class="animals-subtitle">${m}</p></div>
          <p class="animals-text">${b}</p></div>

          <button type= "button" class="animals-btn" data-animal-id="${t}">Дізнатись більше</button></li>`).join("")}p.addEventListener("click",e=>{if(e.target.classList.contains("animals-btn")){const t=e.target.dataset.animalId;t&&we(t,ne)}});d.addEventListener("click",Te);async function Te(e){y++,I(),ee();try{const t=await $(y);if(t&&t.animals.length>0){p.insertAdjacentHTML("beforeend",q(t.animals));const o=document.querySelector(".animals-item").getBoundingClientRect().height;window.scrollBy({left:0,top:o*.6,behavior:"smooth"}),e.target.blur(),M(),L()}p.children.length>=t.totalItems&&(d.disabled=!0,d.classList.add("disabled"),c.info({message:"Всі хвостики вже тут",position:"topRight",color:"green"}))}catch{c.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"})}}J.addEventListener("click",_e);async function _e(e){if(e.preventDefault(),I(),ee(),y=1,d.disabled=!1,d.classList.remove("disabled"),e.target!==e.currentTarget){p.innerHTML="",Re.classList.remove("active"),J.querySelectorAll(".active").forEach(n=>{n.classList.remove("active")}),e.target.classList.add("active"),B=e.target.dataset.id;try{const n=await $(B);p.insertAdjacentHTML("beforeend",q(n.animals)),M(),L()}catch{c.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"}),M(),L()}}}function je(e){return z("/api/orders",{method:"POST",body:JSON.stringify(e)})}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("[data-order-backdrop]"),t=document.querySelector("[data-order-modal]"),n=document.querySelector(".order-modal__close"),a=document.getElementById("orderForm"),o=document.getElementById("pets-list-section");if(!e||!t||!a||!o)return;let i=null;function r(s){s.key==="Escape"&&closeOrderModal()}function m(s){s.target===e&&closeOrderModal()}function b(){window.addEventListener("keydown",r),e.addEventListener("click",m)}function w(){window.removeEventListener("keydown",r),e.removeEventListener("click",m)}function oe(s){i=s,e.classList.add("is-open"),A(),b()}function h(){e.classList.remove("is-open"),x(),a.reset(),i=null,w()}n.addEventListener("click",h),e.addEventListener("click",s=>{s.target===e&&h()}),window.addEventListener("keydown",s=>{s.key==="Escape"&&e.classList.contains("is-open")&&h()}),a.addEventListener("submit",async s=>{s.preventDefault();const O=a.name.value.trim(),E=a.phone.value.trim().replace(/\D/g,""),ae=a.comment.value.trim();if(!O||!E){c.error({message:"Заповніть обовʼязкові поля",position:"topRight"});return}if(E.length!==12){c.error({message:"Телефон має формат 380XXXXXXXXX",position:"topRight"});return}if(!i){c.error({message:"Не обрано тварину",position:"topRight"});return}const ie={name:O,phone:E,comment:ae,animalId:i};try{await je(ie),c.success({message:"Заявку надіслано",position:"topRight"}),h()}catch(re){c.error({message:re.message||"Помилка сервера",position:"topRight"})}}),window.openOrderModal=oe});
//# sourceMappingURL=index.js.map
