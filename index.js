import{A as ae,R as re,S as ie,i as c,a as H}from"./assets/vendor-Dmhv6PSn.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function C(){document.body.style.overflow="hidden"}function I(){document.body.style.overflow=""}function se(e,t=0){if(!e)return;const n=e.getBoundingClientRect().top+window.scrollY-t;window.scrollTo({top:n,behavior:"smooth"})}const d={burgerBtn:document.querySelector(".header-burger-btn"),modalMenu:document.querySelector(".header-modal-menu"),closeBtn:document.querySelector(".header-close-btn"),modalLinks:document.querySelectorAll(".header-modal-link"),modalBtn:document.querySelector(".header-modal-btn"),header:document.querySelector(".header")};function ce(){d.modalMenu.classList.contains("is-open")||(d.modalMenu.classList.add("is-open"),C(),de())}function f(){d.modalMenu.classList.contains("is-open")&&(d.modalMenu.classList.remove("is-open"),I(),le())}function de(){document.addEventListener("keydown",j),document.addEventListener("click",U)}function le(){document.removeEventListener("keydown",j),document.removeEventListener("click",U)}function j(e){e.key==="Escape"&&f()}function U(e){const t=e.target.closest(".header-modal-link"),n=e.target.closest(".header-modal-btn"),r=e.target.closest(".icon-header-btn");(t||n||r)&&f();const o=e.target.closest('a[href^="#"]');if(!o)return;const a=o.getAttribute("href");if(a==="#")return;const i=document.querySelector(a);if(!i)return;e.preventDefault();const u=d.header?.offsetHeight||0;se(i,u),f()}d.burgerBtn?.addEventListener("click",ce);d.closeBtn?.addEventListener("click",f);const ue=window.matchMedia("(min-width: 1440px)");ue.addEventListener("change",e=>{e.matches&&f()});new ae(".faq-list",{duration:300,showMultiple:!1,openOnInit:[]});function R(e){const t=window.innerWidth<768;e.params.navigation.nextEl=t?".about-mob-next":".about-desk-next",e.params.navigation.prevEl=t?".about-mob-prev":".about-desk-prev",e.navigation.destroy(),e.navigation.init(),e.navigation.update(),e.params.pagination.el=t?".about-mob-pagination":".about-desk-pagination",e.pagination.destroy(),e.pagination.init(),e.pagination.render(),e.pagination.update()}new Swiper(".about-swiper",{slidesPerView:1,spaceBetween:0,speed:600,navigation:{nextEl:".about-mob-next",prevEl:".about-mob-prev"},pagination:{el:".about-mob-pagination",clickable:!0},grabCursor:!0,allowTouchMove:!0,watchOverflow:!0,breakpoints:{768:{},1440:{}},on:{init(e){R(e)},breakpoint(e){R(e)}}});const m=document.getElementById("petModalBackdrop"),N=document.getElementById("petModalContainer"),w=document.getElementById("modalCloseBtn"),X=document.querySelectorAll("[data-modal-adopt]"),P=document.getElementById("modalImageWrapper");document.getElementById("modalImage");const me=document.getElementById("modalSpecies"),pe=document.getElementById("modalName"),fe=document.getElementById("modalAge"),ge=document.getElementById("modalGender"),he=document.getElementById("modalDescription"),ve=document.getElementById("modalHealth"),ye=document.getElementById("modalBehavior");let k=null;function _(e){e.target===m&&g()}function D(e){e.stopPropagation()}function F(e){e.key==="Escape"&&!m.classList.contains("hidden")&&g()}function V(){g(),console.log("Opening adoption form for animal:",k),openOrderModal(k)}function be(e,t){const n=t.get(e);if(!n){console.error("Animal not found:",e);return}k=e,P.replaceChildren();const r=[n].map(({image:o,name:a})=>`
        <img
          class="modal-image"
          src="${o}"
          alt="${a}"
          loading="lazy"
        />
      `).join("");P.insertAdjacentHTML("afterbegin",r),me.textContent=n.species,pe.textContent=n.name,fe.textContent=n.age,ge.textContent=n.gender,he.textContent=n.description||"Інформація відсутня",ve.textContent=n.healthStatus||"Інформація про здоров'я відсутня",ye.textContent=n.behavior||"Інформація про поведінку відсутня",m.classList.remove("hidden"),document.body.classList.add("modal-open"),w.focus(),C(),w.addEventListener("click",g),m.addEventListener("click",_),N.addEventListener("click",D),document.addEventListener("keydown",F),X.forEach(o=>{o.addEventListener("click",V)})}function g(){m.classList.add("hidden"),document.body.classList.remove("modal-open"),w.removeEventListener("click",g),m.removeEventListener("click",_),N.removeEventListener("click",D),document.removeEventListener("keydown",F),X.forEach(e=>{e.removeEventListener("click",V)}),I()}const Le="https://paw-hut.b.goit.study";async function G(e,t={}){const n=await fetch(`${Le}${e}`,{headers:{"Content-Type":"application/json"},...t});if(!n.ok){const r=await n.json().catch(()=>({}));throw new Error(r.message||"API error")}return n.json()}function Ee({page:e=1,limit:t=10}={}){return G(`/api/feedbacks?page=${e}&limit=${t}`)}const S=document.getElementById("stories-list");S||console.error("Element #stories-list not found");const we=new URL("./img/star-filled.svg",import.meta.url).href,ke=new URL("./img/star-outline.svg",import.meta.url).href,Se=new URL("./img/star-half.svg",import.meta.url).href;function Me(){document.querySelectorAll(".story-rating").forEach(e=>{if(e.dataset.inited)return;const t=Number(e.dataset.rate)||0;new re(e,{readOnly:!0,score:t,half:!0,starOn:we,starOff:ke,starHalf:Se}).init(),e.dataset.inited="true"})}function Be({rate:e,description:t,author:n}){return`
    <div class="swiper-slide story-card">
      <div class="story-rating rating" data-rate="${e}"  aria-label="Оцінка ${e} з 5"></div>
      <p class="story-text">${t}</p>
      <p class="story-author">${n}</p>
    </div>
  `}let T=null;function Ae(){if(T)return;const e=window.Swiper||ie;if(!e){console.error("Swiper is not available. Add Swiper via <script> or install via npm.");return}T=new e(".success-stories-swiper",{slidesPerView:1,slidesGroup:2,speed:500,autoHeight:!0,pagination:{el:".slider-pagination",clickable:!0,bulletClass:"dot",bulletActiveClass:"active"},navigation:{nextEl:".slider-btn--next",prevEl:".slider-btn--prev",disabledClass:"is-disabled"},breakpoints:{768:{slidesPerView:2,spaceBetween:32},1440:{slidesPerView:2,spaceBetween:32}}})}async function Ce(){try{const e=await Ee({page:1,limit:5}),t=e?.results||e?.feedbacks||e?.data?.results||[];if(!Array.isArray(t)||t.length===0){console.error("No feedbacks found");return}S.innerHTML="",t.forEach(n=>{S.insertAdjacentHTML("beforeend",Be(n))}),Me(),Ae()}catch(e){console.error("Failed to load feedbacks:",e)}}Ce();const K="https://paw-hut.b.goit.study/api/",Ie="categories",$e="animals",W=window.matchMedia("(min-width: 1440px)"),qe=document.querySelector(".categories-list"),p=document.querySelector(".animals-list"),z=document.querySelector(".categories-list"),l=document.querySelector(".loadmore-btn"),Oe=document.querySelector(".categories-text"),Q=document.querySelector("span");function J(){Q.classList.remove("hidden")}function M(){Q.classList.add("hidden")}function v(){l.classList.remove("hidden")}function $(){l.classList.add("hidden")}$();async function xe(){const{data:e}=await H(`${K}${Ie}`);return e}xe().then(e=>{qe.insertAdjacentHTML("beforeend",Re(e))});function Re(e){return e.toSorted((n,r)=>n._id.localeCompare(r._id)).map(({name:n,_id:r})=>`<li class="categories-item"><div class="categories-text" data-id="${r}" >${n}</div></li>`).join("")}let y=1,B=0,A=null;function Y(e){return e.matches?B=9:B=8}W.addEventListener("change",Y);Y(W);async function q(){const{data:e}=await H(`${K}${$e}`,{params:{page:y,limit:B,categoryId:A}});return e}q().then(e=>{p.insertAdjacentHTML("beforeend",O(e.animals)),v()}).catch(e=>c.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"}));const Z=new Map;function O(e){return e.forEach(t=>{Z.set(t._id,t)}),e.map(({_id:t,image:n,name:r,species:o,categories:a,age:i,gender:u,behavior:b})=>`<li class="animals-item"><img class="animals-img" src="${n}" alt="${o}"/><div class="animals-item-container"><p class="animals-subtitle">${o}</p><h2 class="animals-title">${r}</h2><div class="animals-sublist">${a.map(({name:L})=>`<h3 class="animals-categories">${L}</h3>`).join("")}</div><div class="animals-textlist"><p class="animals-subtitle">${i}</p><p class="animals-subtitle">${u}</p></div>
          <p class="animals-text">${b}</p></div>

          <button type= "button" class="animals-btn" data-animal-id="${t}">Дізнатись більше</button></li>`).join("")}p.addEventListener("click",e=>{if(e.target.classList.contains("animals-btn")){const t=e.target.dataset.animalId;t&&be(t,Z)}});l.addEventListener("click",Pe);async function Pe(e){y++,$(),J();try{const t=await q(y);if(t&&t.animals.length>0){p.insertAdjacentHTML("beforeend",O(t.animals));const o=document.querySelector(".animals-item").getBoundingClientRect().height;window.scrollBy({left:0,top:o*.6,behavior:"smooth"}),e.target.blur(),M(),v()}p.children.length>=t.totalItems&&(l.disabled=!0,l.classList.add("disabled"),c.info({message:"Всі хвостики вже тут",position:"topRight",color:"green"}))}catch{c.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"})}}z.addEventListener("click",Te);async function Te(e){if(e.preventDefault(),$(),J(),y=1,l.disabled=!1,l.classList.remove("disabled"),e.target!==e.currentTarget){p.innerHTML="",Oe.classList.remove("active"),z.querySelectorAll(".active").forEach(n=>{n.classList.remove("active")}),e.target.classList.add("active"),A=e.target.dataset.id;try{const n=await q(A);p.insertAdjacentHTML("beforeend",O(n.animals)),M(),v()}catch{c.error({message:"Упс, щось пішло не так. Спробуйте ще раз!",position:"topRight",color:"red"}),M(),v()}}}function He(e){return G("/api/orders",{method:"POST",body:JSON.stringify(e)})}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("[data-order-backdrop]"),t=document.querySelector("[data-order-modal]"),n=document.querySelector(".order-modal__close"),r=document.getElementById("orderForm"),o=document.getElementById("pets-list-section");if(!e||!t||!r||!o)return;let a=null;function i(s){s.key==="Escape"&&closeOrderModal()}function u(s){s.target===e&&closeOrderModal()}function b(){window.addEventListener("keydown",i),e.addEventListener("click",u)}function L(){window.removeEventListener("keydown",i),e.removeEventListener("click",u)}function ee(s){a=s,e.classList.add("is-open"),C(),b()}function h(){e.classList.remove("is-open"),I(),r.reset(),a=null,L()}n.addEventListener("click",h),e.addEventListener("click",s=>{s.target===e&&h()}),window.addEventListener("keydown",s=>{s.key==="Escape"&&e.classList.contains("is-open")&&h()}),r.addEventListener("submit",async s=>{s.preventDefault();const x=r.name.value.trim(),E=r.phone.value.trim().replace(/\D/g,""),te=r.comment.value.trim();if(!x||!E){c.error({message:"Заповніть обовʼязкові поля",position:"topRight"});return}if(E.length!==12){c.error({message:"Телефон має формат 380XXXXXXXXX",position:"topRight"});return}if(!a){c.error({message:"Не обрано тварину",position:"topRight"});return}const ne={name:x,phone:E,comment:te,animalId:a};try{await He(ne),c.success({message:"Заявку надіслано",position:"topRight"}),h()}catch(oe){c.error({message:oe.message||"Помилка сервера",position:"topRight"})}}),window.openOrderModal=ee});
//# sourceMappingURL=index.js.map
